spotless {
  java {
    target 'src/**/*.java'
    removeUnusedImports()
    cleanthat()
    palantirJavaFormat("2.41.0")
        .style("GOOGLE")
        .formatJavadoc(true)

    custom 'Empty class/interface braces on new line', {
      it.replaceAll(/(public\s+(?:interface|class|record)\s+\w+(?:<\w+(?:,\s*\w+)*>)?\s*(?:\([^)]*\))?(?:\s+extends\s+\w+(?:<\w+(?:,\s+\w+)>)?)?(?:\s+implements\s+\w+(?:<\w+(?:,\s+\w+)>)?(?:,\s*\w+(?:<\w+(?:,\s+\w+)>)?)*)?)\s*\{\s*\}/, '$1 {\n}')    }
  }
}